// SPDX-License-Identifier: Apache-2.0
// Copyright 2023 Aztec Labs.
pragma solidity >=0.8.18;

import {IVyperDecoderDeployer} from "@aztec/core/interfaces/IVyperDecoderDeployer.sol";

// If making this a library, viem shits its pants when deploying for e2e tests.
contract VyperDecoderDeployer is IVyperDecoderDeployer {
  function deploy() external override(IVyperDecoderDeployer) returns (address) {
    // This is a little nasty. Cimpile the vyper contract to bytecode and then insert it here
    // from l1-contracts run: vyper src/core/vy_decoder/Decoder.vy
    bytes memory bytecode =
      hex"61157061001161000039611570610000f36003361161000c576111d4565b60003560e01c3461155e5763e5c5e9a381186111d2576044361061155e576004356004016202000081351161155e578035806204016052602082018181620401803750505062040160603f6020825103136001161561155e57604060051c60051b60200181015190506206018052600062060180516001810381811161155e5790508162060340015260208101905062040160516101c01161155e57610140620601e06101406204020060045afa50610140620601c052620601c08051602082018362060340018281848460045afa505050808301925050508062060320526206032090506020600082516020840160025afa1561155e576000519050620601a052600062060180518162060360015260208101905062040160516103001161155e57610140620602006101406204034060045afa50610140620601e052620601e08051602082018362060360018281848460045afa505050808301925050508062060340526206034090506020600082516020840160025afa1561155e576000519050620601c05261016036620601e037610300620603405262060340516204016051600482011161155e578062040180018051620603805250600462060360526206036090506020810151815160200360031b1c9050620601e052620601e0518060051c9050620603605262060340516004810181811061155e57905062060200526206034051620601e0518060051b818160051c1861155e579050806004016004811061155e57905080820182811061155e5790509050620603405262060340516204016051600482011161155e578062040180018051620603a05250600462060380526206038090506020810151815160200360031b1c9050620601e05262060340516004810181811061155e57905062060220526206034051620601e0518060051b818160051c1861155e579050806004016004811061155e57905080820182811061155e5790509050620603405262060340516204016051600482011161155e578062040180018051620603a05250600462060380526206038090506020810151815160200360031b1c9050620601e05262060340516004810181811061155e57905062060240526206034051620601e0518060061b818160061c1861155e579050806004016004811061155e57905080820182811061155e5790509050620603405262060340516204016051600482011161155e578062040180018051620603a05250600462060380526206038090506020810151815160200360031b1c9050620601e05262060340516004810181811061155e57905062060260526206034051620601e0518060051b818160051c1861155e579050806004016004811061155e57905080820182811061155e5790509050620603405262060340516204016051600482011161155e578062040180018051620603a05250600462060380526206038090506020810151815160200360031b1c9050620601e05262060340516004810181811061155e57905062060280526206028051620601e0518060051b818160051c1861155e57905080820182811061155e5790509050620602a0526206034051620601e0516054810281605482041861155e579050806004016004811061155e57905080820182811061155e5790509050620603405262060340516204016051600482011161155e578062040180018051620603a05250600462060380526206038090506020810151815160200360031b1c9050620601e05262060340516004810181811061155e579050620602c052620601e051620602e0526206034051620601e0518060051b818160051c1861155e579050806004016004811061155e57905080820182811061155e5790509050620603405262060340516204016051600482011161155e578062040180018051620603a05250600462060380526206038090506020810151815160200360031b1c9050620601e05262060340516004810181811061155e57905062060300526206034051620601e051806004016004811061155e57905080820182811061155e5790509050620603405262060340516004810181811061155e57905062060320526105c036620603803760006008905b806206094052620603605162060940511861063057610c6b565b620401605180604052806060826204018060045afa50506206030051620200605261065d620609606111da565b620609608051620608c0526020810151620603005250620401605180604052806060826204018060045afa5050620603005162020060526106a0620609606111da565b620609608051620608e0526020810151620603005250620401605180604052806060826204018060045afa5050620603205162020060526106e3620609606111da565b62060960805162060900526020810151620603205250620401605180604052806060826204018060045afa505062060320516202006052610726620609606111da565b6206096080516206092052602081015162060320525062060380516007811161155e5760018101620603805260006206020051620401605161040082011161155e57806204018001610400620609806104008360045afa5050610400620609605262060960905080516020820183620615e0018281848460045afa505050808301925050506206022051620401605161040082011161155e5780620401800161040062060da06104008360045afa505061040062060d805262060d80905080516020820183620615e0018281848460045afa505050808301925050506206024051620401605161020082011161155e57806204018001610200620611c06102008360045afa5050610200620611a052620611a0905080516020820183620615e0018281848460045afa5050508083019250505062060260516204016051608082011161155e578062040180016080620613e060808360045afa50506080620613c052620613c0905080516020820183620615e0018281848460045afa5050508083019250505062060280516204016051604082011161155e5780620401800160406206148060408360045afa50506040620614605262061460905080516020820183620615e0018281848460045afa50505080830192505050620602a0516204016051602082011161155e578062040180018051620614e052506020620614c052620614c0905080516020820183620615e00181518152505080830192505050600081620615e00152600c81019050620602a0516020810181811061155e5790506204016051601482011161155e5780620401800180516206152052506014620615005262061500905080516020820183620615e00181518152505080830192505050620602a0516034810181811061155e5790506204016051602082011161155e5780620401800180516206156052506020620615405262061540905080516020820183620615e00181518152505080830192505050600081620615e00152600c81019050620602a0516034810181811061155e5790506020810181811061155e5790506204016051601482011161155e578062040180018051620615a052506014620615805262061580905080516020820183620615e00181518152505080830192505050620608c05181620615e00152602081019050620608e05181620615e00152602081019050620609005181620615e00152602081019050620609205181620615e0015260208101905080620615c052620615c090506020600082516020840160025afa1561155e5760005190508160051b620603a001525060006004905b806206096052620602605162060960518060051b818160051c1861155e57905080820182811061155e57905090506206098052620604a051601f811161155e5760018101620604a0526204016080516206098051602082038113157fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8213161561155e57601f81168160051c81610b8a578060051b602001850151610bb2565b816020036101000a6001820160051b60200186015104826101000a8260051b60200187015102015b905090509050905090508160051b620604c0015250600101818118610aea5750506206020051610400810181811061155e57905062060200526206022051610400810181811061155e57905062060220526206024051610200810181811061155e579050620602405262060260516080810181811061155e579050620602605262060280516040810181811061155e5790506206028052620602a0516068810181811061155e579050620602a052600101818118610616575b50506206038051806040528060051b80606082620603a060045afa505050610c95620609606113b9565b620609605162060940526000620609605260006010905b8062060b8052620602e05162060b805110610ce9576206096051600f811161155e5760018101620609605260008160051b62060980015250610db7565b6206096051600f811161155e57600181016206096052620401608051620602c05162060b80518060051b818160051c1861155e57905080820182811061155e5790509050602082038113157fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8213161561155e57601f81168160051c81610d79578060051b602001850151610da1565b816020036101000a6001820160051b60200186015104826101000a8260051b60200187015102015b905090509050905090508160051b620609800152505b600101818118610cac575050600062060960511561155e57600060051b6206098001518162060bc00152602081019050600262060960511061155e57600160051b6206098001518162060bc00152602081019050600362060960511061155e57600260051b6206098001518162060bc00152602081019050600462060960511061155e57600360051b6206098001518162060bc00152602081019050600562060960511061155e57600460051b6206098001518162060bc00152602081019050600662060960511061155e57600560051b6206098001518162060bc00152602081019050600762060960511061155e57600660051b6206098001518162060bc00152602081019050600862060960511061155e57600760051b6206098001518162060bc00152602081019050600962060960511061155e57600860051b6206098001518162060bc00152602081019050600a62060960511061155e57600960051b6206098001518162060bc00152602081019050600b62060960511061155e57600a60051b6206098001518162060bc00152602081019050600c62060960511061155e57600b60051b6206098001518162060bc00152602081019050600d62060960511061155e57600c60051b6206098001518162060bc00152602081019050600e62060960511061155e57600d60051b6206098001518162060bc00152602081019050600f62060960511061155e57600e60051b6206098001518162060bc00152602081019050601062060960511061155e57600f60051b6206098001518162060bc001526020810190508062060ba05262060ba090506020600082516020840160025afa1561155e57600051905062060b8052600062040160516103001161155e5761030062060be06103006204018060045afa5061030062060bc05262060bc08051602082018362060f00018281848460045afa5050508083019250505062060940518162060f00015260208101905062060b80518162060f0001526020810190508062060ee05262060ee090506020600082516020840160025afa1561155e5760005190507f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000018106905062060ba05260c0620601805162060bc052620601a05162060be052620601c05162060c005262060ba05162060c20528062060c40528062060bc0016000620604a0518083528060051b6000826020811161155e57801561116057905b8060051b620604c001518160051b602088010152600101818118611141575b505082016020019150509050810190508062060c60528062060bc001600062060960518083528060051b6000826010811161155e5780156111bc57905b8060051b6206098001518160051b60208801015260010181811861119d575b5050820160200191505090508101905062060bc0f35b505b60006000fd5b620200605162020080526202008051604051600482011161155e57806060018051620200e052506004620200c052620200c090506020810151815160200360031b1c9050620200a05262020080516004810181811061155e57905062020080526000620200c05260006064905b80620200e052620200a05161125b576113a3565b6202008051604051600482011161155e57806060018051620201405250600462020120526202012090506020810151815160200360031b1c9050620201005262020080516004810181811061155e5790506202008052620200805162020100516040518183011161155e57816060018162020160838360045afa505080620201405262020140905090506020600082516020840160025afa1561155e57600051905062020120526202008051620201005180820182811061155e57905090506202008052620200a05162020100516004810181811061155e57905080820382811161155e5790509050620200a0526000620200c051816202016001526020810190506202012051816202016001526020810190508062020140526202014090506020600082516020840160025afa1561155e576000519050620200c052600101818118611247575b5050620200c05181526202008051602082015250565b60006101605260006008905b80610180526040516101605160ff811161155e578060020a9050106113e957611409565b610160516001810181811061155e579050610160526001018181186113c5575b5050610100366101803760006008905b8061028052604051610280511861142f57611463565b6102805160405181101561155e5760051b60600151610280516007811161155e5760051b6101800152600101818118611419575b50506000600a905b806102805261016051610280511861148257611553565b60006004905b806102a0526102a0518060011b818160011c1861155e5790506102c0526040516102c051186114b657611546565b60006102c0516007811161155e5760051b61018001518161030001526020810190506102c0516001810181811061155e5790506007811161155e5760051b6101800151816103000152602081019050806102e0526102e090506020600082516020840160025afa1561155e5760005190506102a0516007811161155e5760051b6101800152600101818118611488575b505060010181811861146b575b505061018051815250565b600080fda165767970657283000307000b";

    address a;
    assembly {
      a := create(0, add(bytecode, 0x20), mload(bytecode))
    }

    return a;
  }
}
